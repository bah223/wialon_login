@dp.message(Command(commands=['token_list']))
async def token_list_command(message: types.Message):
    # ... (–Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    
    for i, token_data in enumerate(user_tokens):
        # ... (–æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ä–æ–∫–µ –¥–µ–π—Å—Ç–≤–∏—è, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
        if "expire_time" in token_data and token_data["expire_time"]:
            expire_time = int(token_data["expire_time"])
            expire_str = datetime.datetime.fromtimestamp(expire_time).strftime('%Y-%m-%d %H:%M:%S')
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏—Å—Ç–µ–∫ –ª–∏ —Ç–æ–∫–µ–Ω
            if expire_time < time.time():
                token_info += f"‚ö†Ô∏è <b>–ò–°–¢–ï–ö:</b> {expire_str}\n"
            else:
                # –°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å
                days_left = (expire_time - time.time()) / 86400
                hours_left = ((expire_time - time.time()) % 86400) / 3600
                days_str = f"{int(days_left)} –¥–Ω. {int(hours_left)} —á."
                token_info += f"üìÖ <b>–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ:</b> {expire_str} "
                if days_left < 3:
                    token_info += f"(‚ö†Ô∏è –æ—Å—Ç–∞–ª–æ—Å—å {days_str})\n"
                else:
                    token_info += f"({days_str})\n"
        elif "duration" in token_data and token_data["duration"]:
            duration_seconds = int(token_data["duration"])
            days = duration_seconds // 86400
            hours = (duration_seconds % 86400) // 3600
            minutes = (duration_seconds % 3600) // 60
            token_info += f"‚åõ <b>–í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è:</b> {days} –¥–Ω. {hours} —á. {minutes} –º–∏–Ω. ({duration_seconds} —Å–µ–∫)\n" 